!function(){"use strict";var e={38:function(e,t,n){var l,a=(l=n(121))&&l.__esModule?l:{default:l};document.addEventListener("DOMContentLoaded",(()=>{(0,a.default)()}))},121:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(207)),a=r(n(629));function r(e){return e&&e.__esModule?e:{default:e}}t.default=()=>{l.default.component.registerMany({ChatGPTField:a.default})}},629:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var l={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(l,r,o):l[r]=e[r]}return l.default=e,n&&n.set(e,l),l}(n(594)),r=(l=n(551))&&l.__esModule?l:{default:l},o=n(556);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.default=e=>{const[t,n]=(0,a.useState)(""),[l,u]=(0,a.useState)(!1),[i,s]=(0,a.useState)("rewrite-existing-text"),[d,c]=(0,a.useState)(!1),f=(0,a.useRef)(null),m=(0,a.useRef)(null),p=(0,a.useRef)(null),h=(e,t)=>a.default.createElement(r.default,{color:"info",onClick:()=>s(t),active:i===t,outline:"true"},e),g=()=>{const e=!d;c(!d),m.current.checked=e},v=e.data.styleGuide.replace(/\n/g,", ").split(",").map((e=>a.default.createElement("li",null,e)));let y="";return"rewrite-existing-text"===i?y=a.default.createElement("div",null,"Apply the style guide to text entered below"):"freeform-prompt"===i&&(y=a.default.createElement("div",null,"Ask ChatGPT to do something for you. The results will have the style guide applied to it")),a.default.createElement("div",{className:"ChatGPTField no-change-track"},a.default.createElement("div",null,a.default.createElement("strong",null,"Mode: "),h("Rewrite text","rewrite-existing-text"),h("Freeform prompt","freeform-prompt")),y,a.default.createElement("div",null,a.default.createElement(o.Input,{type:"textarea",rows:"6",innerRef:f})),a.default.createElement("div",null,a.default.createElement("strong",null,"Default style guide:"),a.default.createElement("ul",null,v),a.default.createElement("div",{className:"ChatGPTField__edit-style-guide"},"Administrators can ",a.default.createElement("a",{href:"/admin/settings#Root_ContentAI",target:"_blank"},"edit the default style guide"))),a.default.createElement(o.Form,null,a.default.createElement(o.FormGroup,{check:!0,inline:!0},a.default.createElement(o.Input,{type:"checkbox",onChange:g,innerRef:m}),a.default.createElement(o.Label,{check:!0,onClick:g},"Use custom style guide")),a.default.createElement("div",{style:{display:d?"block":"none"}},"Enter your custom style guide rules seperated by line breaks.",a.default.createElement("br",null),"These rules will be used instead of the default style guide rules.",a.default.createElement(o.Input,{type:"textarea",rows:"3",innerRef:p}))),a.default.createElement("div",null,a.default.createElement(r.default,{color:"warning",onClick:()=>{const t=f.current.value;if(!t)return void n("Please enter some text in the field above.");let l=`${e.data.queryUrl}?mode=${i}`;if(d){let e=p.current.value;if(e){const t=e.split("\n");e=t.map((e=>e.replace(/^[\*\-] */,""))).join("\n"),e=e.replaceAll("\n","|").replaceAll("||","|").replaceAll(/[\x00-\x1F\x7F]/gm,""),l+=`&styleguide=${encodeURIComponent(e)}`}}u(!0),fetch(l,{method:"POST",body:t}).then((e=>e.text())).then((e=>{n(e),u(!1)}))}},"Submit"),l&&a.default.createElement("span",{className:"ChatGPTField__querying"},"Communicating with ChatGPT...")),t&&a.default.createElement("div",null,a.default.createElement("strong",null,"Response from ChatGPT:"),a.default.createElement("br",null),a.default.createElement(o.Input,{type:"textarea",rows:"12",value:t,readOnly:"true"}),a.default.createElement("br",null),"Submit again to get a different result."),"rewrite-existing-text"===i&&a.default.createElement("div",{className:"ChatGPTField__sample-text"},a.default.createElement("strong",null,"Sample text that could be optimised:"),a.default.createElement("br",null),"All information (including name and address details) contained in submissions will be made available to the public on the website unless you indicate that you would like all or part of your submission to remain in confidence. Automatically generated confidentiality statements in emails do not suffice for this purpose.",a.default.createElement("br",null),a.default.createElement("br",null),"Respondents who would like part of their submission to remain in confidence should provide this information marked as such in a separate attachment."))}},541:function(e,t,n){var l=u(n(669)),a=u(n(594)),r=u(n(145)),o=n(207);function u(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},i.apply(this,arguments)}l.default.entwine("ss",(e=>{e(".js-injector-boot .entwine-chatgpt-field").entwine({Component:null,Root:null,onmatch(){const e=this.closest(".cms-content").attr("id"),t=e?{context:e}:{},n=this.data("schema-component"),l=(0,o.loadComponent)(n,t);this.setComponent(l),this.setRoot(r.default.createRoot(this[0])),this._super(),this.refresh()},refresh(){const e=this.getProps();this.getInputField().val(e.value);const t=this.getComponent();this.getRoot().render(a.default.createElement(t,i({},e,{noHolder:!0})))},handleChange(e){this.getInputField().data("value",e),this.refresh()},getProps(){const e=this.getInputField();return{...e.data("schema"),...e.data("state"),data:{...e.data("schema").data,...e.data("state").data},onChange:this.handleChange.bind(this)}},getInputField(){const t=this.data("field-id");return e(`#${t}`)},onunmatch(){const e=this.getRoot();e&&e.unmount()}})}))},551:function(e){e.exports=Button},207:function(e){e.exports=Injector},594:function(e){e.exports=React},145:function(e){e.exports=ReactDomClient},556:function(e){e.exports=Reactstrap},669:function(e){e.exports=jQuery}},t={};function n(l){var a=t[l];if(void 0!==a)return a.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,n),r.exports}n(38),n(541)}();